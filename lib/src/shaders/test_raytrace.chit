#version 460
#extension GL_EXT_ray_tracing : require

struct RTInstance {
  uint index_offset;
  uint index_cout;
  uint mat_id;
};

struct Vertex {
  vec3 position;
  vec3 normal;
  vec2 tcoord;
};

hitAttributeEXT vec2 attrib;

layout(location = 0)  rayPayloadInEXT vec3 payload;

layout(std430, binding=0, set=3) readonly buffer vertexBuffer {
  Vertex vertices[];
} VertexBuffer;

layout(std430, binding=0, set=4) readonly buffer indexBuffer {
  uint indices[];
} IndexBuffer;

layout(std430, binding=0, set=5) readonly buffer instanceBuffer {
  RTInstance instances[];
} InstanceBuffer;

void main() {
  const vec3 barycentric = vec3(1.0 - attrib.x - attrib.y, attrib.x, attrib.y);
  payload = vec3(barycentric);
}
